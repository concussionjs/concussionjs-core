(function(h,j){var d=function(){},g=[],f={};d.prototype.inferObjects=function(a){g=[];f={};this.parseHTML(a);return g};d.prototype.compare=function(a,b){return a.length!=b.length?!1:this.findNameInList(a,b)};d.prototype.parseHTML=function(a,b,c){for(var a=pkg.knockout.filterNestedNodes(pkg.knockout.parseDatabinds(a)),e=0;e<a.length;e++){var d=pkg.knockout.getDirective($(a[e]).attr("data-bind")),d=pkg.knockout.constructs[d.toLowerCase()];if(!d)throw Error("InvalidDirective");if((d=d($(a[e]),b,c))&&
!b&&!f[d.name])f[d.name]=d,g[g.length]=d}};pkg={knockout:{getObjectName:function(a){a=a.split(".");return 1<a.length?a[0]:null},getParameter:function(a,b){var c=a.split(",")[0].split(":");return 0<c.length?(c[1]=$.trim(c[1]),b?(c=c[1].split(b+"."),1==c.length?c[0]:2==c.length?c[1]:null):c[1]):null},getDirective:function(a){a=a.split(",")[0].split(":");return 0<a.length?(a[0]=$.trim(a[0]),a[0]):null},parseDatabinds:function(a){a=$("<div></div>").html(a);return $("[data-bind]",a)},filterNestedNodes:function(a){return $(a).filter(function(){return 0==
h.$(this).parents("[data-bind]").length})},processPeers:function(a,b,c){if(1<a.length)for(i=1;i<a.length;i++)parseHTML(a[i],b,c)},constructs:{attr:function(){},click:function(){},foreach:function(a,b){var c={};c.name=pkg.knockout.getObjectName(pkg.knockout.getParameter($(a).attr("data-bind")));c.type="array";c.children=[];f[c.name]&&(c=f[c.name]);d.prototype.parseHTML($(a)[0].innerHTML,c);return b?(b.children||(b.children=[]),b.children[b.children.length]=c,null):c},text:function(a,b,c){if(b){if(b.fields){if((a=
pkg.knockout.getParameter($(a).attr("data-bind"),c))&&""!=a)(b.fields[b.fields.length]={}).name=a,d.prototype.dedupe(b.fields)}else if(b.fields=[],(a=pkg.knockout.getParameter($(a).attr("data-bind"),c))&&""!=a)(b.fields[0]={}).name=a;return null}},value:function(a,b,c){if(b){if(b.fields){if((a=pkg.knockout.getParameter($(a).attr("data-bind"),c))&&""!=a)(b.fields[b.fields.length]={}).name=a,d.prototype.dedupe(b.fields)}else if(b.fields=[],(a=pkg.knockout.getParameter($(a).attr("data-bind"),c))&&""!=
a)(b.fields[0]={}).name=a;return null}},submit:function(a,b){var c={};c.name=pkg.knockout.getObjectName(pkg.knockout.getParameter($(a).attr("data-bind")));c.type="array";c.children=[];f[c.name]&&(c=f[c.name]);d.prototype.parseHTML($(a)[0].innerHTML,c,c.name);return b?(b.children||(b.children=[]),b.children[b.children.length]=c,null):c}}}};d.prototype.dedupe=function(a){for(var b=[],c=[],e=0;e<a.length;e++)-1==b.indexOf(a[e].name)&&(b[b.length]=a[e].name,c[c.length]=a[e]);return c};d.prototype.findNameInList=
function(a,b){var c=0,e=0,d;if(!a&&!b)return!0;if(!a&&b||a&&!b)return!1;for(;c<a.length;){for(d=!1;e<b.length;)a[c].name==b[e].name&&a[c].type==b[e].type&&this.findNameInList(a[c].children,b[e].children)&&this.findNameInList(a[c].fields,b[e].fields)&&(d=!0),e++;if(!d)return!1;e=0;c++}return!0};d.prototype.createUUID=function(){for(var a=[],b=0;36>b;b++)a[b]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);a[14]="4";a[19]="0123456789abcdef".substr(a[19]&3|8,1);a[8]=a[13]=a[18]=a[23]="";return a.join("")};
d.prototype.createUUID=function(a){for(var b=[],c=0;36>c;c++)b[c]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);b[14]="4";b[19]="0123456789abcdef".substr(b[19]&3|8,1);b[8]=b[13]=b[18]=b[23]="";b=b.join("");a(b)};d.prototype.getUUID=function(a){$.get("http://testdrive.concussionjs.com/getUUID",function(b){a(b)})};d.prototype.createCookie=function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="; expires="+d.toGMTString()}else c="";document.cookie=a+"="+b+c+"; path=/";localStorage.setItem("sessionId",
b)};d.prototype.readCookie=function(a){a+="=";if(document.cookie)for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}else if(localStorage.getItem("sessionId"))return localStorage.getItem("sessionId");return null};d.prototype.eraseCookie=function(a){createCookie(a,"",-1)};d.prototype.getPage=function(a){var b=[],c,e=document.URL.split("?")[1];page={};if(e!=j)for(var e=e.split("&"),
f=0;f<e.length;f++)c=e[f].split("="),b.push(c[1]),b[c[0]]=c[1];console.log("vars[id]="+b.id);!b.id&&!d.prototype.readCookie("sessionId")?d.prototype.createUUID(function(b){d.prototype.createCookie("sessionId",b,1);page.id=d.prototype.readCookie("sessionId");page.html=$("html")[0].innerHTML;page.name="index";a(page)}):(b.id?(d.prototype.createCookie("sessionId",b.id,1),page.id=b.id):page.id=d.prototype.readCookie("sessionId"),page.html=$("html")[0].innerHTML,page.name="index",a(page))};h.cjs=new d})(window);
